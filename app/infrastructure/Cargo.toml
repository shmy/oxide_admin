[package]
name = "infrastructure"
version = "0.1.0"
edition = "2024"

[lib]
path = "lib.rs"

[features]
redb = ["dep:redb", "background_job/sqlite"]
redis = ["dep:bb8-redis", "background_job/redis"]

[dependencies]
anyhow = { workspace = true }
axum = { workspace = true }
bb8-redis = { workspace = true, optional = true }
bon = { workspace = true }
background_job = { workspace = true }
captcha_generator = { workspace = true }
chrono = { workspace = true }
chrono-tz = { workspace = true, features = ["std"] }
const_format = { workspace = true }

domain = { workspace = true }
hex = { workspace = true, features = ["alloc"] }
hmac-sha256 = { workspace = true }
jsonwebtoken = { workspace = true }
nject = { workspace = true, features = ["macro"] }
readonly = { workspace = true }
redb = { workspace = true, optional = true }
rmp-serde = { workspace = true }
serde = { workspace = true, features = ["derive"] }
serde_json = { workspace = true, features = ["std"] }
serde_urlencoded = { workspace = true }
single_flight = { workspace = true }
sqlx = { workspace = true, features = [
    "runtime-tokio",
    "postgres",
    "macros",
    "migrate",
    "chrono",
    "json",
    "derive",
] }
tempoid = { workspace = true }
tokio = { workspace = true, features = ["full"] }
tracing = { workspace = true }
tracing-appender = { workspace = true }
