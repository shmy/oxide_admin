> ä¸€ä¸ªåŸºäºRustå’ŒAmis.js/Reactçš„åå°ç®¡ç†ç³»ç»Ÿèµ·å§‹æ¨¡ç‰ˆ

[![Build](https://github.com/shmy/oxide_admin/actions/workflows/build.yaml/badge.svg)](https://github.com/shmy/oxide_admin/actions/workflows/build.yaml)
![License: MIT OR Apache-2.0](https://img.shields.io/badge/license-MIT%20OR%20Apache--2.0-blue)

## ğŸ¯ é¡¹ç›®ç›®æ ‡
- æä¾›ä¸€ä¸ªå¿«é€Ÿæ„å»ºåå°ç®¡ç†ç³»ç»Ÿçš„èµ·ç‚¹
- ä½¿ç”¨ç°ä»£åŒ–çš„Rustå’ŒAmis.js/ReactæŠ€æœ¯æ ˆ
- éµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)å’Œæ•´æ´æ¶æ„åŸåˆ™

## ğŸ‘€ åœ¨çº¿é¢„è§ˆ
> ç”±äºä½¿ç”¨ `Render`çš„å…è´¹è®¡åˆ’ï¼Œè®¿é—®å¯èƒ½è¾ƒæ…¢ï¼Œ15åˆ†é’Ÿæ— æ“ä½œä¼šå†»ç»“å®ä¾‹ï¼Œä¹‹åè®¿é—®éœ€è¦ç»è¿‡`Render`çš„ä¸­é—´é¡µï¼Œè¯·çŸ¥æ‚‰ã€‚

[https://oxide-admin.onrender.com/_](https://oxide-admin.onrender.com/_)
> è¯·å‹¿ä¿®æ”¹å¯†ç 

- è´¦å·ï¼šadmin
- å¯†ç ï¼š123456


## âœ¨ ç‰¹æ€§
- DDDæ¶æ„ï¼šéµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)å’Œæ•´æ´æ¶æ„åŸåˆ™ï¼Œå®ç°é€‚é…å±•ç¤ºã€åº”ç”¨æœåŠ¡ã€é¢†åŸŸæ¨¡å‹ã€åŸºç¡€è®¾æ–½å±‚çš„åˆ†ç¦»ï¼›
- äº‹ä»¶æ€»çº¿ï¼šå†…ç½®äº‹ä»¶ç³»ç»Ÿï¼Œé€šè¿‡å‘å¸ƒ/ç›‘å¬é¢†åŸŸäº‹ä»¶æ¥è§£è€¦ä¸šåŠ¡é€»è¾‘ï¼›
- ä¾èµ–æ³¨å…¥ï¼šç”±`nject` crateè¿›è¡Œæ”¯æŒï¼›
- ä»£ç ç”Ÿæˆï¼šä¸€é”®ç”Ÿæˆå„ä¸ªæ¨¡å—çš„ä»£ç ï¼Œè¯¸å¦‚`CRUD`ã€`CommandHandler`ã€`QueryHandler`ç­‰ç­‰ï¼›
- æ—¶åŒºé…ç½®ï¼šé…ç½®æ•°æ®åº“æ—¶åŒºï¼›
- ç”¨æˆ·è®¤è¯ï¼šä½¿ç”¨`JWT`ï¼Œæ”¯æŒ`refresh_token`å’Œ`access_token`çš„ç­¾å‘ã€éªŒè¯å’Œåˆ·æ–°ï¼›
- ç”¨æˆ·æˆæƒï¼šå†…ç½®`RBAC`ï¼Œçµæ´»çš„æ§åˆ¶å‰ç«¯èœå•æƒé™ä»¥åŠæ¥å£æƒé™éªŒè¯ï¼›
- æ•°æ®åº“è‡ªåŠ¨è¿ç§»ï¼šéƒ¨ç½²æ—¶æ— éœ€æ‰‹åŠ¨è¿ç§»ï¼›
- é€Ÿç‡é™åˆ¶ä¸­é—´ä»¶: å¯å¯¹è·¯ç”±è¿›è¡Œé™é€Ÿï¼›
- å›¾å½¢éªŒè¯: é˜²æ­¢æš´åŠ›ç ´è§£ï¼Œé˜²æ­¢æ¶æ„è¯·æ±‚ï¼›
- æ—¥å¿—è½®è½¬ã€æ—¥å¿—åˆ†çº§ï¼šç”±`tracing` crateè¿›è¡Œæ”¯æŒï¼›
- å†…å»º*single_flight*å®ï¼šç¼“è§£æ•°æ®åº“å‹åŠ›ï¼›
- æ–‡ä»¶ä¸Šä¼ åŠè®¿é—®ç­¾åï¼šå†…å»ºå•æ–‡ä»¶ä¸Šä¼ ã€å›¾ç‰‡ä¸Šä¼ ã€åˆ†ç‰‡ä¸Šä¼ ç­‰æ¥å£ï¼Œé€‚é…`Amis`ï¼›
- KVç¼“å­˜ï¼šæ”¯æŒ`ttl`ï¼Œä½¿ç”¨`redis`æˆ–`redb`ï¼›
- åå°ä»»åŠ¡ï¼šç”±`faktory` ä½¿ç”¨æ”¯æŒï¼›
- ä¼˜é›…å…³åœï¼šä¸¥è°¨åœ°ç»“æŸæœåŠ¡ã€é‡Šæ”¾èµ„æºï¼›
- å¤šæºé…ç½®ï¼šæ”¯æŒç¯å¢ƒå˜é‡ã€`.env`æ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨`cli`å‚æ•°ï¼›
- Github CIï¼šè‡ªåŠ¨æ„å»º`x86_64-unknown-linux-musl`ï¼›
- ...

### Crate features
- `kv_redb`: ä½¿ç”¨`redb`ä½œä¸ºkv/ç¼“å­˜ï¼Œé€‚åˆå•ä½“é¡¹ç›®ï¼Œé»˜è®¤å€¼ï¼›
- `kv_redis`: ä½¿ç”¨`redis`ä½œä¸ºkv/ç¼“å­˜ï¼Œé€‚åˆåˆ†å¸ƒå¼é¡¹ç›®ï¼›
- `bg_dummy`: ç¦æ­¢ä½¿ç”¨åå°ä»»åŠ¡ï¼Œé»˜è®¤å€¼ï¼›
- `bg_faktory`: ä½¿ç”¨`faktory`ä½œä¸ºåå°ä»»åŠ¡ï¼›
- `object_storage_fs`: ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä½œä¸ºå¯¹è±¡å­˜å‚¨ï¼Œé»˜è®¤å€¼ï¼›
- `object_storage_s3`: ä½¿ç”¨S3å…¼å®¹æœåŠ¡ä½œä¸ºå¯¹è±¡å­˜å‚¨ï¼›

## ğŸˆå‰ç«¯
- æ¶æ„ï¼šä½¿ç”¨`Amis`ä½ä»£ç ï¼Œå€Ÿç”¨å…¶ä¸°å¯Œçš„ç»„ä»¶ï¼Œå¿«é€Ÿåœ°å®Œæˆçš„CRUDç›¸å…³åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Reactè‡ªå®šä¹‰ç»„ä»¶è¿›è¡Œè¡¥å……ï¼›
- ä¼˜åŒ–ï¼šæ„å»ºæ—¶è‡ªåŠ¨æ··æ·†ã€è‡ªåŠ¨gzipå‹ç¼©ï¼›

## âš™ï¸ æŠ€æœ¯æ ˆ
- **åç«¯**: Rust + Axum + SQLx + Nject + Postgres + Redb
- **å‰ç«¯**: Amis.js + React + TypeScript + Rsbuild
- **å·¥å…·**: just + pnpm


## ğŸ“ ç›®å½•ç»“æ„

```txt
oxide_admin/
â”œâ”€â”€ app/                    # Ruståç«¯
â”‚   â”œâ”€â”€ adapter/            # APIå±‚ (RESTç«¯ç‚¹)
â”‚   â”œâ”€â”€ application/        # åº”ç”¨å±‚ (ç”¨ä¾‹/æœåŠ¡)
â”‚   â”œâ”€â”€ domain/             # é¢†åŸŸå±‚ (å®ä½“/å€¼å¯¹è±¡)
â”‚   â”œâ”€â”€ infrastructure/     # åŸºç¡€è®¾æ–½å±‚ (æŠ€æœ¯å®ç°)
â”‚         â””â”€â”€ port/             # é¢†åŸŸå®ç°
â”‚         â””â”€â”€ migration/        # æ•°æ®åº“è¿ç§»
â”‚         â””â”€â”€ repository/       # ä»“å‚¨å®ç°
â”œâ”€â”€ frontend/             # å‰ç«¯åº”ç”¨
â”œâ”€â”€ target/               # æ„å»ºè¾“å‡º
â””â”€â”€ Cargo.toml            # workspace é…ç½®
```
> ä¸¥æ ¼éµå®ˆ`DDD`è®¾è®¡åŸåˆ™ï¼Œç¡®ä¿ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹
> è¯·å…ˆç¡®ä¿å·²å®‰è£… Rust å’Œ Node.js ç¯å¢ƒï¼Œä»¥åŠ just å’Œ pnpmã€‚

### å…‹éš†é¡¹ç›®åŠåˆå§‹åŒ–
```bash
git clone git@github.com:shmy/oxide_admin.git
cd oxide_admin
# start a postgres
docker compose up -d
# setup env
cp .env.example .env
# install sqlx-cli & cargo-watch
cargo install sqlx-cli cargo-watch
# setup sqlx migration
just setup
```
### å¯åŠ¨åç«¯
```base
just dev
```
> åç«¯é»˜è®¤ç›‘å¬`127.0.0.1:8080`ï¼Œå‰ç«¯ä¼šæœ‰`dev server`è¿›è¡Œä»£ç†ï¼›

### å¯åŠ¨å‰ç«¯
```base
cd frontend
pnpm install
pnpm dev
```
> è®¿é—® `http://127.0.0.1:3000/_`

## ğŸ“¦ æ„å»ºå‘½ä»¤
- æœ¬æœºæ¶æ„:
```bash
just build
```
- äº¤å‰ç¼–è¯‘ï¼š`Linux/x86_64-unknown-linux-musl`
> éœ€è¦ç¡®ä¿å®‰è£…äº†`cross`, ä½¿ç”¨`cargo install cross`å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚
```bash
just build_linux_x86_64_musl
```
- äº¤å‰ç¼–è¯‘ï¼š`Windows/x86_64-pc-windows-msvc`
> éœ€è¦ç¡®ä¿å®‰è£…äº†`xwin`, ä½¿ç”¨`cargo install cargo-xwin`å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚
```bash
just build_windows_x86_64_msvc
```
- ç¼–è¯‘Docker image
```bash
just build_container
```

## ğŸ“ƒ ä»£ç ç”Ÿæˆ
### CRUD ç”Ÿæˆ
```bash
cargo g scaffold -h
```

### æ›´å¤šè¯¦è§
```bash
cargo g -h
```
